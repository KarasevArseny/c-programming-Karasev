–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ 9: –ò—Ç–æ–≥–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
–°–∏—Å—Ç–µ–º–∞ —É—á—ë—Ç–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤ (–í–∞—Ä–∏–∞–Ω—Ç C)
–°—Ç—É–¥–µ–Ω—Ç: –ö–∞—Ä–∞—Å–µ–≤ –ê—Ä—Å–µ–Ω–∏–π –ê–ª–µ–∫—Å–µ–µ–≤–∏—á
–ì—Ä—É–ø–ø–∞: 1–∑–±_–ò–í–¢-25
–î–∞—Ç–∞: 21 —Ñ–µ–≤—Ä–∞–ª—è 2026 –≥.

–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–°–∏—Å—Ç–µ–º–∞ —É—á—ë—Ç–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤ ‚Äî –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É—á—ë—Ç–∞ –¥–æ—Ö–æ–¥–æ–≤ –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤–µ–¥–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—á–µ—Ç–æ–≤, –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç—á—ë—Ç–æ–≤.

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—á–µ—Ç–∞–º–∏

‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥

‚úÖ –û—Ç—á—ë—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV

‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ñ–∞–π–ª–µ

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

variantC_finance/
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îú‚îÄ‚îÄ data.h          # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –Ω–∏–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ storage.h       # –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ ui.h            # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îî‚îÄ‚îÄ utils.h         # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.c          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ data.c          # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ storage.c       # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ ui.c            # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ utils.c         # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É—Ç–∏–ª–∏—Ç
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ test_finance.c  # –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ data/               # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ñ–∞–π–ª–æ–≤ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ Makefile
‚îú‚îÄ‚îÄ meson.build
‚îî‚îÄ‚îÄ README.md

Include guards
–í—Å–µ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç include guards –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è:

c
#ifndef DATA_H
#define DATA_H

// –æ–±—ä—è–≤–ª–µ–Ω–∏—è

#endif // DATA_H
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è
–ú–æ–¥—É–ª—å data
data.h ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ—Ç–æ—Ç–∏–ø—ã —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–º–∏.

–°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
c
// –¢–∏–ø—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
typedef enum {
    TRANSACTION_INCOME,
    TRANSACTION_EXPENSE
} TransactionType;

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
typedef struct {
    int id;
    TransactionType type;
    double amount;
    char category[MAX_CATEGORY_NAME];
    char description[MAX_DESCRIPTION];
    time_t date;
    char account[MAX_ACCOUNT_NAME];
} Transaction;

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—á—ë—Ç–∞
typedef struct {
    char name[MAX_ACCOUNT_NAME];
    double balance;
} Account;

// –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
typedef struct {
    Transaction *transactions;
    int transaction_count;
    int transaction_capacity;
    int next_transaction_id;
    
    Account accounts[MAX_ACCOUNTS];
    int account_count;
    
    char categories[MAX_CATEGORIES][MAX_CATEGORY_NAME];
    int category_count;
} FinanceData;
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
–§—É–Ω–∫—Ü–∏—è	–û–ø–∏—Å–∞–Ω–∏–µ
finance_init	–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
finance_cleanup	–û—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏
finance_add_account	–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—á—ë—Ç–∞
finance_remove_account	–£–¥–∞–ª–µ–Ω–∏–µ —Å—á—ë—Ç–∞
finance_add_category	–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
finance_add_transaction	–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
finance_edit_transaction	–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
finance_delete_transaction	–£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
finance_filter_by_date	–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ
finance_get_category_stats	–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
–§—Ä–∞–≥–º–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (data.c):

c
int finance_add_transaction(FinanceData *data, TransactionType type,
                           double amount, const char *category,
                           const char *description, const char *account,
                           time_t date) {
    if (!data || !category || !description || !account) return -1;
    if (amount <= 0) return -2;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Å—á—ë—Ç–∞
    Account *acc = finance_find_account(data, account);
    if (!acc) return -3;
    
    // –†–∞—Å—à–∏—Ä—è–µ–º –º–∞—Å—Å–∏–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
    if (data->transaction_count >= data->transaction_capacity) {
        int new_capacity = data->transaction_capacity == 0 ? 10 : data->transaction_capacity * 2;
        Transaction *new_trans = realloc(data->transactions, new_capacity * sizeof(Transaction));
        if (!new_trans) return -5;
        
        data->transactions = new_trans;
        data->transaction_capacity = new_capacity;
    }
    
    // –°–æ–∑–¥–∞—ë–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
    Transaction *t = &data->transactions[data->transaction_count];
    t->id = data->next_transaction_id++;
    t->type = type;
    t->amount = amount;
    utils_safe_strcpy(t->category, category, MAX_CATEGORY_NAME);
    utils_safe_strcpy(t->description, description, MAX_DESCRIPTION);
    utils_safe_strcpy(t->account, account, MAX_ACCOUNT_NAME);
    t->date = date;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å —Å—á—ë—Ç–∞
    if (type == TRANSACTION_INCOME) {
        acc->balance += amount;
    } else {
        acc->balance -= amount;
    }
    
    data->transaction_count++;
    return t->id;
}
–ú–æ–¥—É–ª—å storage
storage.h ‚Äî –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –≤ –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª, –∞ —Ç–∞–∫–∂–µ —ç–∫—Å–ø–æ—Ä—Ç –≤ CSV.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
–§—É–Ω–∫—Ü–∏—è	–û–ø–∏—Å–∞–Ω–∏–µ
storage_save	–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª
storage_load	–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞
storage_export_csv	–≠–∫—Å–ø–æ—Ä—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥ –≤ CSV
storage_ensure_data_dir	–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

–§—Ä–∞–≥–º–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (storage.c):

int storage_save(const FinanceData *data, const char *filename) {
    if (!data || !filename) return -1;
    
    // –°–æ–∑–¥–∞—ë–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
    storage_ensure_data_dir();
    
    // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–π –ø—É—Ç—å
    char fullpath[512];
    snprintf(fullpath, sizeof(fullpath), "%s/%s", storage_get_data_dir(), filename);
    
    FILE *file = fopen(fullpath, "wb");
    if (!file) return -2;
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—á–µ—Ç–æ–≤ –∏ —Å–∞–º–∏ —Å—á–µ—Ç–∞
    fwrite(&data->account_count, sizeof(int), 1, file);
    fwrite(data->accounts, sizeof(Account), data->account_count, file);
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    fwrite(&data->category_count, sizeof(int), 1, file);
    for (int i = 0; i < data->category_count; i++) {
        fwrite(data->categories[i], MAX_CATEGORY_NAME, 1, file);
    }
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    fwrite(&data->transaction_count, sizeof(int), 1, file);
    fwrite(&data->next_transaction_id, sizeof(int), 1, file);
    fwrite(data->transactions, sizeof(Transaction), data->transaction_count, file);
    
    fclose(file);
    return 0;
}
–ú–æ–¥—É–ª—å ui
ui.h ‚Äî —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –º–µ–Ω—é –∏ —Ñ–æ—Ä–º–∞–º–∏ –≤–≤–æ–¥–∞.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
–§—É–Ω–∫—Ü–∏—è	–û–ø–∏—Å–∞–Ω–∏–µ
ui_main_loop	–ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥
ui_show_main_menu	–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
ui_read_int	–í–≤–æ–¥ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
ui_read_double	–í–≤–æ–¥ –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞
ui_read_date	–í–≤–æ–¥ –¥–∞—Ç—ã
ui_show_transactions	–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
ui_show_stats	–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
–§—Ä–∞–≥–º–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (ui.c):

c
void ui_show_stats(const FinanceData *data) {
    time_t now = time(NULL);
    struct tm *tm_now = localtime(&now);
    
    // –ù–∞—á–∞–ª–æ —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞
    struct tm tm_month_start = *tm_now;
    tm_month_start.tm_mday = 1;
    tm_month_start.tm_hour = 0;
    tm_month_start.tm_min = 0;
    tm_month_start.tm_sec = 0;
    time_t month_start = mktime(&tm_month_start);
    
    double total_balance = finance_get_balance(data);
    double month_income = finance_get_income_total(data, month_start, now);
    double month_expense = finance_get_expense_total(data, month_start, now);
    
    printf("\n=== –°–¢–ê–¢–ò–°–¢–ò–ö–ê ===\n\n");
    printf("–û–±—â–∏–π –±–∞–ª–∞–Ω—Å: %.2f ‚ÇΩ\n\n", total_balance);
    
    printf("–¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü:\n");
    printf("  –î–æ—Ö–æ–¥—ã:  +%.2f ‚ÇΩ\n", month_income);
    printf("  –†–∞—Å—Ö–æ–¥—ã: -%.2f ‚ÇΩ\n", month_expense);
    printf("  –ò—Ç–æ–≥–æ:   %+.2f ‚ÇΩ\n", month_income - month_expense);
    
    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü
    if (month_expense > 0) {
        char cats[MAX_CATEGORIES][MAX_CATEGORY_NAME];
        double amounts[MAX_CATEGORIES];
        int cat_count;
        
        finance_get_category_stats(data, month_start, now, cats, amounts, &cat_count);
        
        if (cat_count > 0) {
            printf("\n–†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (—Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü):\n");
            for (int i = 0; i < cat_count; i++) {
                double percent = (amounts[i] / month_expense) * 100;
                printf("  %-15s %10.2f ‚ÇΩ (%5.1f%%)\n", 
                       cats[i], amounts[i], percent);
            }
        }
    }
}
–ú–æ–¥—É–ª—å utils
utils.h ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏, –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
–§—É–Ω–∫—Ü–∏—è	–û–ø–∏—Å–∞–Ω–∏–µ
utils_parse_date	–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç—ã –∏–∑ —Å—Ç—Ä–æ–∫–∏
utils_format_date	–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –≤ —Å—Ç—Ä–æ–∫—É
utils_format_currency	–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª—é—Ç—ã
utils_is_valid_amount	–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å—É–º–º—ã
utils_is_valid_category	–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

–§—Ä–∞–≥–º–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (utils.c):

time_t utils_parse_date(const char *date_str) {
    if (!date_str || strlen(date_str) == 0) {
        return time(NULL);
    }
    
    struct tm tm = {0};
    if (sscanf(date_str, "%d-%d-%d", &tm.tm_year, &tm.tm_mon, &tm.tm_mday) == 3) {
        tm.tm_year -= 1900;
        tm.tm_mon -= 1;
        return mktime(&tm);
    }
    
    return time(NULL);
}

int utils_is_valid_category(const char *category) {
    if (!category || strlen(category) == 0) return 0;
    
    for (int i = 0; category[i]; i++) {
        if (!isalnum(category[i]) && category[i] != ' ' && 
            category[i] != '-' && category[i] != '_') {
            return 0;
        }
    }
    return 1;
}
–ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å main
main.c ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø—É—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

#include <stdio.h>
#include <stdlib.h>
#include <locale.h>
#include "data.h"
#include "storage.h"
#include "ui.h"
#include "utils.h"

int main(void) {
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ª–æ–∫–∞–ª—å –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä—É—Å—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
    setlocale(LC_ALL, "");
    
    FinanceData data;
    finance_init(&data);
    
    // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    int load_result = storage_load(&data, "finance.dat");
    
    if (load_result == 0) {
        printf("‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ finance.dat\n");
    } else if (load_result == -2) {
        printf("‚ÑπÔ∏è –§–∞–π–ª –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω. –ë—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –±–∞–∑–∞.\n");
        
        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        finance_add_account(&data, "–ù–∞–ª–∏—á–Ω—ã–µ", 0);
        finance_add_account(&data, "–ö–∞—Ä—Ç–∞", 0);
        
        finance_add_category(&data, "–ü—Ä–æ–¥—É–∫—Ç—ã");
        finance_add_category(&data, "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç");
        finance_add_category(&data, "–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è");
        finance_add_category(&data, "–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ");
        finance_add_category(&data, "–ó–∞—Ä–ø–ª–∞—Ç–∞");
    } else {
        printf("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö (–∫–æ–¥ %d)\n", load_result);
    }
    
    ui_init();
    ui_main_loop(&data);
    ui_cleanup();
    
    // –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    storage_save(&data, "finance.dat");
    finance_cleanup(&data);
    
    printf("\nüëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!\n");
    return 0;
}
–°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏
Makefile
makefile
CC = gcc
CFLAGS = -Wall -Wextra -Wpedantic -std=c11 -I include
CFLAGS_DEBUG = -g -O0
CFLAGS_RELEASE = -O2 -DNDEBUG
LDFLAGS = -lm

SRC_DIR = src
OBJ_DIR = obj
BIN_DIR = bin
DATA_DIR = data

SRCS = $(wildcard $(SRC_DIR)/*.c)
OBJS = $(patsubst $(SRC_DIR)/%.c,$(OBJ_DIR)/%.o,$(SRCS))
TARGET = $(BIN_DIR)/finance_manager

.PHONY: all clean debug release test data_dir

all: CFLAGS = $(CFLAGS_DEBUG)
all: data_dir $(TARGET)

debug: CFLAGS = $(CFLAGS_DEBUG)
debug: data_dir $(TARGET)

release: CFLAGS = $(CFLAGS_RELEASE)
release: data_dir $(TARGET)

$(TARGET): $(OBJS) | $(BIN_DIR)
	$(CC) $^ $(LDFLAGS) -o $@

$(OBJ_DIR)/%.o: $(SRC_DIR)/%.c | $(OBJ_DIR)
	$(CC) $(CFLAGS) -c $< -o $@

$(BIN_DIR) $(OBJ_DIR):
	mkdir -p $@

data_dir:
	mkdir -p $(DATA_DIR)

test: CFLAGS = $(CFLAGS_DEBUG)
test: $(BIN_DIR)/test_finance
	./$(BIN_DIR)/test_finance

$(BIN_DIR)/test_finance: tests/test_finance.c $(filter-out $(OBJ_DIR)/main.o,$(OBJS)) | $(BIN_DIR)
	$(CC) $(CFLAGS) $^ $(LDFLAGS) -o $@

clean:
	rm -rf $(OBJ_DIR) $(BIN_DIR) $(DATA_DIR)

run: $(TARGET)
	./$(TARGET)

.PHONY: clean run
–¶–µ–ª–∏ Makefile:

make –∏–ª–∏ make debug ‚Äî —Å–±–æ—Ä–∫–∞ debug –≤–µ—Ä—Å–∏–∏

make release ‚Äî —Å–±–æ—Ä–∫–∞ release –≤–µ—Ä—Å–∏–∏

make test ‚Äî –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

make run ‚Äî –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã

make clean ‚Äî –æ—á–∏—Å—Ç–∫–∞

Meson.build
meson
project('finance_manager', 'c',
  version: '1.0.0',
  default_options: ['warning_level=3', 'c_std=c11', 'buildtype=debugoptimized']
)

inc = include_directories('include')

# –°–æ–∑–¥–∞—ë–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
data_dir = meson.current_source_dir() / 'data'
run_command('mkdir', '-p', data_dir, check: false)

# –ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
src_files = files(
  'src/main.c',
  'src/data.c',
  'src/storage.c',
  'src/ui.c',
  'src/utils.c'
)

# –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
executable('finance_manager',
  src_files,
  include_directories: inc,
  dependencies: [],
  install: false
)

# –¢–µ—Å—Ç—ã
test_src = files('tests/test_finance.c')
test_exe = executable('test_finance',
  [test_src, src_files],
  include_directories: inc,
  dependencies: []
)

test('finance tests', test_exe)

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–±–æ—Ä–∫–∏
if get_option('buildtype') == 'release'
  add_project_arguments('-DNDEBUG', language: 'c')
endif
–ö–æ–º–∞–Ω–¥—ã Meson:

bash
meson setup builddir
meson compile -C builddir
meson test -C builddir

–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã

![9-1](screenshots/task-9-1.png)
